<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <!-- jquery -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>


    <title>Thingy:91 API Client</title>

    <style media="screen">

      h1 {
        text-align: center;
      }

      body {
        padding-top: 20px;
        display: flex;
        min-height: 100vh;
        flex-direction: column;
        /* background-color: #efefef; */
      }

      main {
        flex: 1 0 auto;
      }

      .tabs .tab a.active {
        background-color: #0094d6;
      }

      .tabs .indicator {
        background-color: #027fb7;
      }

      .btn {
        background-color: #0094d6;
      }

      .btn:hover {
        background-color: #0094d6;
      }

    </style>


  </head>
  <body>
    <main>
    <div class="container content">
      <h1>Thingy:91 API Client</h1>
      <div class="row">
        <h5>Description</h5>
      </div>

      <div class="row">
        <h5>Actions</h5>
        <p>This client allows to change the color of the Thingy:91 LED. The update is performed via an observe event.</p>
      </div>
      <div class="row">
        <div class="col s2">
          <form action="#">
            <label for="test5">Select LED color</label>
            <!-- <p class="range-field"> -->
            <input type="color" id="range-field" name="favcolor" value="#ff0000" style="width: 120px; height: 30px; padding-top: 0px;">
              <!-- <input type="range" id="test5" min="0" max="255" /> -->
            <!-- </p> -->
          <!-- <script type="text/javascript">
            $(document).ready(function(){
              $('.range-field').on('click', function(event){
                console.log("clicked range field");
                console.log(event);
                let val = $(event.target).val();
                let r = val / (256^2);
                let g = (val/256) % 256;
                let b = (val%256);
                console.log('rgba(' + r + ',' + g + ',' + b + ')');
                $('#color-div').css("background-color", 'rgba(' + r + ',' + g + ',' + b + ')');
              })
            });
          </script> -->

        </div>
        <div class="s2">
        <button type="button" class="btn" name="button" style="margin-top: 17px;">Change LED Color</button>
        <script>
          $(document).ready(function(){
            $(".btn").on("click", function(event){
              console.log($(event.target));
              // send ajax request
              $.ajax({
                url: 'localhost:4100/update_led/444', // + $("#range-field").val(),
                type: 'GET',
                success: function(res){
                  // materialize toast
                },
                error: function(res){
                  console.log("didnt work");
                }
              })
            });
          });

        </script>
      </div>
    </form>
      </div>


      <div class="row">
        <h5>Data visualizations</h5>
        <p>All data collected from the connected thingy is displayed here</p>
        <div class="row">
          <!-- <div class="col s12"> -->
            <ul class="tabs light-blue accent-3">
              <li class="tab col s3 white-text"><a href="#test1" class="active white-text">Temperature</a></li>
              <li class="tab col s3"><a class="white-text" href="#test2">Other data?</a></li>
              <li class="tab col s3"><a class="white-text" href="#test3">C02</a></li>
              <li class="tab col s3"><a class="white-text" href="#test4">Whatever</a></li>
            </ul>
          <!-- </div> -->
          <div id="test1" class="col s12">
            <script>
              $(document).ready(function(){
                $("#test1").html(getPreloader());
              });
            </script>
          </div>
          <div id="test2" class="col s12">Test 2</div>
          <div id="test3" class="col s12">Test 3</div>
          <div id="test4" class="col s12">Test 4</div>
        </div>

      </div>


    </div>

  </main>


    <footer class="page-footer light-blue accent-3">
          <div class="container">
            <div class="row">
              <!-- <div class="col l6 s12">
                <h5 class="white-text">Footer Content</h5>
                <p class="grey-text text-lighten-4"></p>
              </div> -->
              <div class="col s12">
                <h5 class="white-text">Links</h5>
                <ul>
                  <li><a class="grey-text text-lighten-3" href="#!">Documentation</a></li>
                  <li><a class="grey-text text-lighten-3" href="#!">Github Link</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="footer-copyright">
            <div class="container">
            <div class="right">Â© 2020 Alex Nyffenegger</div>
            <!-- <a class="grey-text text-lighten-4 right" href="#!">M</a> -->
            </div>
          </div>
        </footer>

  </body>

  <script type="text/javascript">

    function getPreloader(){
      return `<div class="preloader-wrapper big active" style="margin-top: 30px; margin-left: 50%;">
        <div class="spinner-layer spinner-blue-only">
          <div class="circle-clipper left">
            <div class="circle"></div>
          </div><div class="gap-patch">
            <div class="circle"></div>
          </div><div class="circle-clipper right">
            <div class="circle"></div>
          </div>
        </div>
      </div>`;
    };

    $(document).ready(function() {
      $('.tabs').tabs();

    });

  </script>
</html>
